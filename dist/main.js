(()=>{"use strict";var e={45:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(30)),n=s(r(408)),a=s(r(389));t.default=class{userDB;constructor(){this.userDB=new o.default}implementMessage(e,t){const{type:r}=e;switch(console.log("implementMessage",e),r){case n.default.reg:{const r=this.userDB.addUser(e,t),s=(0,a.default)(n.default.reg,r);t.send(s);break}default:console.log("default")}}}},30:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(52));t.default=class{users;constructor(){console.log(" New user DB"),this.users=[]}addUser(e,t){const{data:{name:r,password:s}}=e,n=this.getExistUser(r);if(n)return n.password===s?(t.name=n.name,t.index=n.index,{error:!1,...n,errorText:""}):{error:!0,...n,errorText:"Password is wrong!"};const a=new o.default(r,s);return t.name=a.name,t.index=a.index,this.users.push(a),{...a,error:!1,errorText:""}}getExistUser(e){return this.users.find((({name:t})=>e===t))}}},993:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.httpServer=void 0;const o=s(r(147)),n=r(685),a=s(r(17));t.httpServer=(0,n.createServer)(((e,t)=>{const r=a.default.resolve(a.default.dirname(""))+("/"===e.url?"/front/index.html":`/front${e.url}`);o.default.readFile(r,((e,r)=>{if(e)return t.writeHead(404),void t.end(JSON.stringify(e));t.writeHead(200),t.end(r)}))})),t.default=t.httpServer},408:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.reg="reg",e.create_game="create_game",e.start_game="start_game",e.turn="turn",e.attack="attack",e.finish="finish",e.update_room="update_room",e.update_winners="update_winners"}(r||(r={})),t.default=r},52:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class r{static index=0;name;password;index;constructor(e,t){this.name=e,this.password=t,this.index=r.index,r.index+=1}}t.default=r},755:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=e=>{const{data:t,...r}=JSON.parse(e.toString());return{data:JSON.parse(t),...r}}},389:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(e,t)=>JSON.stringify({type:e,data:JSON.stringify(t),id:0})},691:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=r(352),n=s(r(45)),a=s(r(755));new o.WebSocketServer({port:3e3}).on("connection",(e=>{const t=new n.default;e.on("error",console.error),e.on("message",(r=>{try{const s=(0,a.default)(r);t.implementMessage(s,e)}catch(e){console.log("error")}})),e.on("open",(e=>{console.log("Open",e)})),e.on("close",(e=>{console.log("Close",e)}))}))},352:e=>{e.exports=require("ws")},147:e=>{e.exports=require("fs")},685:e=>{e.exports=require("http")},17:e=>{e.exports=require("path")}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}(()=>{const e=r(993);r(691),console.log("Start static http server on the 8181 port!"),e.httpServer.listen(8181)})()})();